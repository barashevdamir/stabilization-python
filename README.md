# Проект стабилизации видео

Этот проект реализует алгоритм стабилизации видео с использованием OpenCV и Python. Он анализирует движение между последовательными кадрами и применяет преобразования, чтобы сгладить дрожание камеры и создать более стабильное видео.

## Зависимости
* OpenCV
* NumPy
* imageio
* matplotlib
* scipy

## Использование

Установите необходимые зависимости.
Поместите видеофайл, который вы хотите стабилизировать, в папку data.
Обновите переменную video_path в скрипте, чтобы она указывала на ваш видеофайл.
Запустите скрипт.
Стабилизированное видео будет сохранено как output_video.mp4 в каталоге проекта.

## Обзор алгоритма

Скрипт выполняет следующие шаги:

* Извлекает кадры из видео: Каждый кадр считывается из видеофайла и сохраняется в списке.
* Вычисляет матрицы гомографии: Скрипт определяет преобразование (гомографию) между каждой парой последовательных кадров с помощью функции findTransformECC OpenCV. Эти преобразования представляют собой движение камеры между кадрами.
* Создает стек деформаций: Матрицы гомографии объединяются в "стек деформаций", который описывает кумулятивное движение камеры на протяжении всего видео.
* Сглаживает траекторию: К стеку деформаций применяется фильтр скользящего среднего, чтобы сгладить внезапные движения камеры и создать более стабильную траекторию.
* Применяет деформацию к кадрам: Каждый кадр деформируется (преобразуется) в соответствии со сглаженной траекторией с помощью функции warpPerspective OpenCV. Это эффективно компенсирует дрожание камеры.
* Создает новое видео: Деформированные кадры объединяются в новый видеофайл, в результате чего получается стабилизированное видео.

## Дополнительные возможности

* Скрипт генерирует графики для визуализации траектории и скорости камеры до и после сглаживания. Это помогает понять эффект процесса стабилизации.
* Скрипт может дополнительно обрезать стабилизированные кадры до общей области, чтобы удалить черные границы, которые могут появиться после деформации.

## Примечания

* Эффективность стабилизации зависит от степени дрожания камеры в исходном видео.
* Скрипт можно дополнительно настроить для регулировки параметров сглаживания и поведения обрезки.